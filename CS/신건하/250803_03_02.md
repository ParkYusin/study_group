# 03-02 명령어 구조

- 연산코드와 오퍼랜드

    - 연산코드: 명령어가 수행할 연산

    - 오퍼랜드: 연산에 사용할 데이터 or 연산에 사용할 데이터가 저장된 위치

- 오퍼랜드

    - 주소필드

        - 연산에 사용할 데이터가 저장된 위치 - 메모리나 레지스터의 이름
    
    - 오퍼랜드는 명령어 안에 없을수도 있고 여러개가 있을수도 있다

        - 0-주소 명령어: 오퍼랜드가 하나도 없을 경우

        - 1-주소 명령어: 오퍼랜드가 하나인 명령어

        - 2-주소 명령어: 오퍼랜드가 두개인 명령어

        - 3-주소 명령어: 오퍼랜드가 세개인 명령어

- 연산코드

    - 연산코드의 종류

    - 명령어의 종류와 생김새는 CPU마다 다르기 때문에 보통 공통적으로 이해하는 연산코드의 종류
    
        - 데이터 전송

            - MOVE: 데이터를 옮겨라

            - STORE: 메모리에 저장하라 

            - PUSH: 스택에 데이터를 저장하라

        - 산술/ 논리 연산

            -  ADD/ SUBTRACT: 덧셈/뺄셈

            - AND/ OR/ NOT

        - 제어 흐름 변경

            - JUMP: 특정 주소로 실행 순서를 옮겨라

            - HALT: 프로그램의 실행을 멈춰라

            - CALL: 되돌아올 주소를 저장한 채 특정 주소로 실행 순서를 옮겨라

        - 입출력 제어

            - READ: 입출력 장치로부터 데이터를 읽어라

            - WRITE: 특정 입출력 장치로 데이터를 써라

- 주소 지정 방식

    -  연산에 사용할 데이터 위치를 찾는 방법

    - 오퍼랜드 필드에 데이터를 직접 적지 않고 모리나 레지스터의 주소를 담는 이유

        명령어의 길이 제한 때문

        하나의 명령이 길이가 N비트라 했을때 연산코드가 M비트일 경우 오퍼랜드필드에 할당할 수 있는 양은 N-M비트가 된다 2주소방식이나 3주소 방식의 경우 더 작아진다
    
    - 종류

        - 즉시 주소 지정 방식

            - 연산에 사용할 데이터를 오퍼랜드 필드에 직접 명시하는 방식

            - 가장 간단한 형태

            - 데이터의 크기가 작아지는 단점이 있지만 가장 빠름

        - 직접 주소 지정 방식

            - 오퍼랜드 필드에 유효 주소를 직접적으로 명시하는 방식

            - 표현할 수 있는 데이터의 크기가 전보다 커졌지만, 여전히 표현할수 있는 범위는 (명령어-연산코드)비트

        - 간접 주소 지정 방식

            - 유효 주소의 주소를 오퍼랜드 필드에 명시

            - 두번의 메모리 접근으로 인해 느리다는 단점

        - 레지스터 주소 지정 방식
        
            - 직접 주소 방식과 비슷하지만 연산에 사용할 데이터를 저장한 레지스터를 오퍼랜드 필드에 직접 명시하는 방식

            - CPU 내부에 있는 레지스터에서 가져오는 것이기 때문에 빠르지만 직접주소 방식과 비슷하게 크기 제한이 있음
        
        - 레지스터 간접 주소 지정 방식

            - 연산에 사용할 데이터를 메모리에 저장하고, 그 주소를 저장한 레지스터를 오퍼랜드 필드에 명시하는 방법

            - 간접 주소 방식과 유사하지만 메모리에 한번만 접근하기 때문에 더빠름

        - 정리

            - 즉시 주소 지정 방식: 연산에 사용할 데이터

            - 직접 주소 지정 방식: 유효 주소

            - 간접 주소 지정 방식: 유효 주소의 주소

            - 레지스터 주소 지정 방식: 유효 주소

            - 레지스터 간접 주소 지정 방식: 유효 주소를 저장한 레지스터

- 스택과 큐

    - 스택

        - 입구가 하나만 있는 저장 공간

        - 처음들어온 데이터가 가장 나중에 나갈 수 있음(LIFO)

    - PUSH/ POP 명령어

        - PUSH: 데이터 저장

        - POP: 데이터 꺼냄
    
    - 큐

        - 입,출구가 양쪽인 저장 공간

        - 처음 들어온 데이터가 가장 먼저 나감 (FIFO)